# MyMood 心情日历小程序

一个简单好用的微信小程序，用于记录每日心情与备注，支持本地存储与可选云同步。

## 快速开始
1. 使用微信开发者工具导入本项目目录。
2. 无需 AppID 可本地预览；若需云同步，请配置真实 AppID 并开通云开发。
3. 运行预览，进入“设置”页自定义表情、颜色映射、周起始日、主题等。

## 功能一览
- 日历视图：
  - 月份切换（左右滑动、顶部选择器、上一月/下一月）
  - 今天快捷键
  - 单击日期选择心情，长按进入详情页
  - 备注小圆点标记；仅当月格子按心情着色
- 详情页：选择心情、填写备注、清除记录
- 设置页：
  - 周起始日、表情集合、颜色映射
  - 主题切换（浅色/深色）
  - 数据导出/导入（JSON）与清除
  - 云同步开关、环境 ID、立即同步
- 统计页：连续记录天数、全部/当月分布；空数据提示

## 数据结构（v2）
- 键：日期 `YYYY-MM-DD`
- 值：`{ mood: string, note?: string, ts: number }`
- 存储键名：`mood_records_v2`

## 云同步（可选）
- 前置：开通云开发环境，复制环境 ID（如 `xxx-yyy`），小程序需有效 AppID。
- 云函数：
  - 目录：`cloudfunctions/login`
  - 右键“上传并部署：云端安装依赖”
- 小程序内：
  - 设置页 → 开启云同步、填写环境 ID → 保存云配置
  - 点击“立即同步”进行双向合并
- 合并策略：
  - 主键：`dateKey`；云端文档 `_id = openid_dateKey`
  - 冲突：按 `ts`（毫秒）取新，空记录会删除对端

## 导出/导入
- 导出：设置页“导出JSON”复制到剪贴板
- 导入：将 JSON 粘贴到“导入JSON”区域并点击“导入”，按 `ts` 合并

## 提审要点（简版）
- 隐私页：`pages/privacy/index`（设置页入口“隐私政策”）
- 数据说明：本地存储 + 可选云同步（仅 openid 关联），无第三方 SDK
- 权限声明：不申请敏感权限
- 功能截图：日历/详情/设置/统计/隐私

## 目录结构（节选）
- pages/
  - calendar/ 详情、样式
  - detail/
  - settings/
  - stats/
  - privacy/
- utils/
  - date.js / storage.js / settings.js / colors.js / cloud.js / sync.js
- cloudfunctions/
  - login/
- changelog/

## 许可
仅供学习与个人使用。
